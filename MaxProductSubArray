// Online Java Compiler
// Use this editor to write, compile and run your Java code online
// Maximum Product SubArray
class Main {
    public static int maxProduct(int[] nums)
    {
        if(nums==null || nums.length == 0)
        {
            return 0;
        }
        int maxEnding = nums[0];
        int minEnding = nums[0];
        int globalMax = nums[0];
        for(int i=1;i<nums.length;i++)
        {
            int x = nums[i];
            // store previous before updating
            int prevMax= maxEnding;
            int prevMin = minEnding;
            
            //compute candidates
            int cand1=x;
            int cand2=x*prevMax;
            int cand3=x*prevMin;
            maxEnding=Math.max(cand1,Math.max(cand2,cand3));
            minEnding=Math.min(cand1,Math.min(cand2,cand3));
            globalMax=Math.max(globalMax,maxEnding);
            
        }
        return globalMax;
        //Time Complexity: O(n) and Space Complexity: O(1)
    }
    public static void main(String[] args) {
        //System.out.println("Try programiz.pro");
        //Maximum Product SubArray 
        int[] a = {2,-3,-2,4};
        System.out.println(maxProduct(a));
    }
}
